''' JSON utils '''
import json
from bson import ObjectId

class Encoder(json.JSONEncoder):      
    def default(self, obj):
        try:
            iterable = iter(obj)
        except TypeError:
            if isinstance(obj, ObjectId):
                return str(obj)
            else:
                # Let the base class default method raise the TypeError
                return json.JSONEncoder.default(self, obj)
        else:
            return list(iterable)


class Decoder(json.JSONDecoder):
    def __init__(self, object_hook=None, parse_float=None, parse_int=None, parse_constant=None, strict=True, object_pairs_hook=None):
        super(Decoder, self).__init__(object_hook, parse_float, parse_int, parse_constant, strict, object_pairs_hook)